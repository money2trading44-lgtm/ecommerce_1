# render.yaml
services:
  - type: web
    name: dsd-ecommerce
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate"
    startCommand: "gunicorn ecommerce_project.wsgi:application"
    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: "dsd-general-trading.onrender.com,dsd-general-trading.com,www.dsd-general-trading.com,localhost,127.0.0.1"
      - key: DISABLE_COLLECTSTATIC
        value: "0"
      - key: CLOUDINARY_CLOUD_NAME
        fromGroup: cloudinary-config
      - key: CLOUDINARY_API_KEY
        fromGroup: cloudinary-config
      - key: CLOUDINARY_API_SECRET
        fromGroup: cloudinary-config

envVarGroups:
  - name: cloudinary-config
    envVars:
      - key: CLOUDINARY_CLOUD_NAME
        value: "debxh9hje"
      - key: CLOUDINARY_API_KEY
        value: "956162166938992"
      - key: CLOUDINARY_API_SECRET
        value: "Azwan_08SWwBwoSllqKvEIhSGrk"